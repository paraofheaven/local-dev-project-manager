module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),o=n(1);t.osDirPath=r.homedir(),t.defaultWorkspace=o.resolve(t.osDirPath,"./Documents/JR_Workspace")},function(e,t){e.exports=require("fs")},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(13),n(11),n(9),n(7),n(5)},function(e,t){e.exports=require("string_decoder")},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("fix-path")},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return s.createElement("div",{className:"welcome-page"},s.createElement("div",{className:"welcome-icon"}),s.createElement("div",{className:"welcome-text"},"Venus is powerful, managing it."))},t}(s.Component);t.default=c},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),c=n(1),i=n(3),a=n(18),l=n(2),u=n(17),p=n(16),d=new(n(15).StringDecoder)("utf8");u();var f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.openProjectVsCode=function(e){var t=c.resolve(l.defaultWorkspace,r.props.projectName),n=c.resolve(l.defaultWorkspace,r.props.projectName,e);if(!i.existsSync(n))throw new Error("module entry not exists");p.exec("code "+t+" "+n)},r.selectedModules=[],r.checkboxChange=function(e,t){t.target.checked?r.selectedModules.push(e):r.selectedModules.forEach(function(t,n){t===e&&r.selectedModules.splice(n,1)})},r.operate=function(e,t,n,o,s){if(!t||r.selectedModules.length)if(r.state[o])console.log("under working");else{var i={};i[o]=!0,r.setState(i);var a=c.resolve(l.defaultWorkspace,r.props.projectName)+"/",u="";"build"===e?u="cd "+a+' && venus build -m "'+(t?r.selectedModules.join():n)+'"':"publishInte"===e?u="cd "+a+' && venus publish -m "'+(t?r.selectedModules.join():n)+'" -f="all"':"publishProd"===e?u="cd "+a+' && venus publish -m "'+(t?r.selectedModules.join():n)+'" -f="assets" -e="prod"':"zip"===e&&(u="cd "+a+' && venus zip -m "'+(t?r.selectedModules.join():n)+'"');var f=p.exec(u);console.log("execting: ",u),f.stdout.on("data",function(e){console.log("stdout: "+d.write(e)),e.toString().includes("Please confirm above modules you could like")&&f.stdin.write("\n")}),f.on("exit",function(){i[o]=!1,r.setState(i,function(){var o={title:"",body:""};"build"===e?(o.title="build success",o.body=t?r.selectedModules.join()+" modules have built successfully":n+" has built successfully",console.log("build finish")):"publishInte"===e?(o.title="publish inte success",o.body=t?r.selectedModules.join()+" modules have published inte successfully":n+" has published inte successfully",console.log("publish inte finish")):"publishProd"===e?(o.title="publish prod success",o.body=t?r.selectedModules.join()+" modules have published prod successfully":n+" has published prod successfully",console.log("publish prod finish")):"zip"===e&&(o.title="zip success",o.body=t?r.selectedModules.join()+" modules have zipped successfully":n+" has zipped successfully",console.log("zip finish")),r.operationNotification(o.title,o.body),"function"==typeof s&&s()})})}else console.log("no module selected")},r.state={showWelcomePage:!0,formatProjectEntries:[],selectEntryPaths:[],buildingSelected:!1,publishingInteSelected:!1,publishingProdSelected:!1,zippingSelected:!1},r}return o(t,e),t.getDerivedStateFromProps=function(e,t){return{showWelcomePage:e.showWelcomePage,formatProjectEntries:e.formatProjectEntries}},t.prototype.operationNotification=function(e,t){var n={title:e,body:t};return new Notification(n.title,n)},t.prototype.renderMainPanel=function(){var e=this;return s.createElement("div",{className:"panel-content"},s.createElement("div",{className:"muti-module-action"},s.createElement("button",{className:"action-build "+(this.state.buildingSelected?"working":""),onClick:function(){return e.operate("build",!0,void 0,"buildingSelected")}},this.state.buildingSelected?s.createElement("div",{className:"working-loading"}):s.createElement("div",null,"Build Selected")),s.createElement("button",{className:"action-publish-inte "+(this.state.publishingInteSelected?"working":""),onClick:function(){return e.operate("publishInte",!0,void 0,"publishingInteSelected")}},this.state.publishingInteSelected?s.createElement("div",{className:"working-loading"}):s.createElement("div",null,"Publish Inte Selected")),s.createElement("button",{className:"action-publish-prod "+(this.state.publishingProdSelected?"working":""),onClick:function(){return e.operate("publishProd",!0,void 0,"publishingProdSelected")}},this.state.publishingProdSelected?s.createElement("div",{className:"working-loading"}):s.createElement("div",null,"Publish Prod Selected")),s.createElement("button",{className:"action-zip "+(this.state.zippingSelected?"working":""),onClick:function(){return e.operate("zip",!0,void 0,"zippingSelected")}},this.state.zippingSelected?s.createElement("div",{className:"working-loading"}):s.createElement("div",null,"Zip Selected"))),s.createElement("div",{className:"modules-list"},this.state.formatProjectEntries.map(function(t,n){console.log("modules change");var r=n+"-build",o=n+"-publish-inte",c=n+"-publish-prod",i=n+"-zip";return s.createElement("div",{key:n,className:"module"},s.createElement("div",{className:"module-icon",onClick:e.openProjectVsCode.bind(e,t.entryValue)}),s.createElement("div",{className:"module-name"},t.highlight?s.createElement("span",{className:"last-half",dangerouslySetInnerHTML:{__html:t.highlight}}):s.createElement("span",null,s.createElement("span",{className:"first-half"},t.prev),""===t.last?null:s.createElement("span",{className:"last-half"},t.last))),s.createElement("input",{type:"checkbox",onChange:e.checkboxChange.bind(e,t.entryKey)}),s.createElement("div",{className:"module-action"},s.createElement("button",{className:"action-build "+(e.state[r]?"working":""),onClick:function(){return e.operate("build",!1,t.entryKey,r)}},e.state[r]?s.createElement("div",{className:"working-loading"}):s.createElement("div",null,"Build")),s.createElement("button",{className:"action-publish-inte "+(e.state[o]?"working":""),onClick:function(){return e.operate("publishInte",!1,t.entryKey,o)}},e.state[o]?s.createElement("div",{className:"working-loading"}):s.createElement("div",null,"Publish Inte")),s.createElement("button",{className:"action-publish-prod "+(e.state[c]?"working":""),onClick:function(){return e.operate("publishProd",!1,t.entryKey,c)}},e.state[c]?s.createElement("div",{className:"working-loading"}):s.createElement("div",null,"Publish Prod")),s.createElement("button",{className:"action-zip "+(e.state[i]?"working":""),onClick:function(){return e.operate("zip",!1,t.entryKey,i)}},e.state[i]?s.createElement("div",{className:"working-loading"}):s.createElement("div",null,"Zip"))))})))},t.prototype.render=function(){return s.createElement("div",{className:"manager-panel"},this.state.showWelcomePage?s.createElement(a.default,null):this.renderMainPanel())},t}(s.Component);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t){e.exports=require("fuse.js")},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),c=n(21),i=n(20),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.projectSearch=function(e){var t=e.target.value;if(console.log(t),""===t)return r.props.searchResultHandler({projectModuleStructure:r.searchData,activeProjectIndex:0});var n=r.fuse.search(t);console.log(n);var o=i.deepClone(n),s=[];o.forEach(function(e,t,n){var o=e.item,c=e.matches;if(c.length){var i=[];c.forEach(function(e,t){if("projectName"===e.key){var n=r.stringInsert(e.value,e.indices);o.projectName=n}else"modules.entryKey"===e.key&&(n=r.stringInsert(e.value,e.indices),void 0!==e.arrayIndex&&(o.modules[e.arrayIndex].highlight=n,i.push(o.modules[e.arrayIndex])))}),i.length||(i=o.modules),o.modules=i,s.push(o)}});var c={projectModuleStructure:s};s.length&&Object.assign(c,{showWelcomePage:!1,activeProjectIndex:0}),r.props.searchResultHandler(c)},r.searchData=JSON.parse(JSON.stringify(t.searchData)),r.fuse=new c(r.searchData,t.searchOptions),r}return o(t,e),t.prototype.stringInsert=function(e,t){var n=e.length,r=[];t.forEach(function(e){console.log("pos "+e),e[1]=e[1]+1,r=r.concat(e)});var o=!0;0!==r[0]&&(r.unshift(0),o=!1),r[n-1]!==n&&r.push(n),console.log("posArr: "+r);var s=r.length,c=[];return r.forEach(function(t,n,r){n!==s-1&&(o?n%2==0?c.push('<span class="search-match">'+e.slice(t,r[n+1])+"</span>"):c.push(e.slice(t,r[n+1])):n%2==0?c.push(e.slice(t,r[n+1])):c.push('<span class="search-match">'+e.slice(t,r[n+1])+"</span>"))}),console.log("newPosArr "+c.join("")),c.join("")},t.prototype.render=function(){return s.createElement("div",{className:"fuse-search "+(this.props.className||"")},s.createElement("input",{id:"fuseSearch",type:"text",placeholder:"search project and module",onInput:this.projectSearch}))},t}(s.Component);t.default=a},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),c=n(22),i=function(e){function t(t){var n=e.call(this,t)||this;return n.searchOptions={caseSensitive:!1,shouldSort:!0,findAllMatches:!0,includeScore:!0,includeMatches:!0,threshold:.5,location:0,distance:100,maxPatternLength:32,minMatchCharLength:2,keys:["projectName","modules.entryKey"]},n}return o(t,e),t.prototype.render=function(){return s.createElement("div",{className:"manager-header"},s.createElement("div",{className:"manager-title"},"Local Dev Project Manager"),s.createElement(c.default,{searchData:this.props.projectModuleStructure,searchOptions:this.searchOptions,searchResultHandler:this.props.searchResultHandler}))},t}(s.Component);t.default=i},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("esprima")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1),s=n(25),c=n(2),i=function(){function e(){}return e.prototype.getWebpackEntry=function(e){var t=o.resolve(c.defaultWorkspace,e,"venus.config.js"),n=r.readFileSync(t,{encoding:"UTF-8"}),i=[];s.parseScript(n,{},function(e){if("Property"===e.type&&"Identifier"===e.key.type&&"entry"===e.key.name){var t=e.value;"ObjectExpression"===t.type&&(i=t.properties)}});var a=[];return i.forEach(function(e){var t={};if("TemplateLiteral"===e.key.type&&e.key.quasis.forEach(function(e){if(!0===e.tail){var n=e.value.cooked,r=n.lastIndexOf("/"),o=-1===n.indexOf("?")?void 0:n.indexOf("?");t.entryKey=n,t.prev=n.slice(0,r+1),t.last=n.slice(r+1,o)}}),"ArrayExpression"===e.value.type){var n=e.value.elements[0]||{};"Literal"===n.type&&(t.entryValue=n.value)}a.push(t)}),a},e.prototype.isVenusProject=function(e){return r.readdirSync(e).includes("venus.config.js")},e.prototype.listVenusProject=function(){var e=this,t=r.readdirSync(c.defaultWorkspace);if(!t.length)return t;var n=[];return t.forEach(function(t,s){var i=o.resolve(c.defaultWorkspace,t);".DS_Store"!==t&&r.statSync(i).isDirectory()&&e.isVenusProject(i)&&n.push(t)}),console.log(n),n},e.prototype.listVenusModules=function(e){var t=o.resolve(c.defaultWorkspace,e);return this.isVenusProject(t)?this.getWebpackEntry(e):[]},e.prototype.buildProjectModuleMap=function(){var e=this;return this.listVenusProject().map(function(t){return{projectName:t,active:!1,modules:e.listVenusModules(t)}}).sort(function(e,t){var n=e.projectName.toLowerCase(),r=t.projectName.toLowerCase();return n<r?-1:n>r?1:0})},e}();t.DirectoryScanner=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),c=n(26),i=n(23),a=n(19),l=function(e){function t(t){var n=e.call(this,t)||this;return n.selectProject=function(e,t){n.setState({activeProjectIndex:t,showWelcomePage:!1})},n.searchResultHandler=function(e){n.setState(e)},n.directoryScanner=new c.DirectoryScanner,n.projectModuleStructure=n.directoryScanner.buildProjectModuleMap(),n.state={projectModuleStructure:n.projectModuleStructure,showWelcomePage:!0,activeProjectIndex:0},n}return o(t,e),t.prototype.render=function(){var e=this,t=this.state.activeProjectIndex,n=this.state.projectModuleStructure[t]||[];return s.createElement("div",{className:"manager-wrapper"},s.createElement(i.default,{projectModuleStructure:this.projectModuleStructure,searchResultHandler:this.searchResultHandler}),s.createElement("div",{className:"manager-container"},s.createElement("div",{className:"side-bar"},this.state.projectModuleStructure.map(function(n,r){return s.createElement("div",{className:"project "+(r===t?"active-project":""),key:r},s.createElement("div",{className:"project-name",onClick:function(){e.selectProject(n.projectName,r)},dangerouslySetInnerHTML:{__html:n.projectName}}))})),s.createElement(a.default,{projectName:n.projectName||"",showWelcomePage:this.state.showWelcomePage,formatProjectEntries:n.modules||[]})))},t}(s.Component);t.default=l},function(e,t){e.exports=require("react-dom")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(28),s=n(27);n(14),o.render(r.createElement(s.default,null),document.getElementById("app"))},function(e,t,n){e.exports=n(29)}]);
//# sourceMappingURL=renderer.js.map